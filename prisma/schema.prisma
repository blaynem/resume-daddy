generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["public"]
}

model User {
  id         String   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  email      String
  first_name String
  last_name  String
  // Order of job history, most recent first
  job_order  String[]

  // ## Define Relations ##
  interests         Interests[]
  jobs              Jobs[]
  skills            Skills[]
  resumePredictions ResumePredictions[]

  @@schema("public")
}

model ResumePredictions {
  id         String @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  user       User   @relation(fields: [user_id], references: [id])
  user_id    String @db.Uuid
  // Prompt is what we sent to the AI to predict.
  prompt     String
  // Prediction is what the AI returned in response.
  prediction String

  @@schema("public")
}

// TODO: Add more tags to break these down further in the future.
model Jobs {
  id                           String    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  user                         User      @relation(fields: [user_id], references: [id])
  user_id                      String    @db.Uuid
  // What users literal job title is
  title                        String
  description                  String
  // Optional company name
  company_name                 String?
  date_started                 DateTime?
  date_ended                   DateTime?
  responsibilities             String?
  interpreted_description      String?
  interpreted_responsibilities String?
  industry                     String?
  achievements                 String?
  // What the job title might also be known as. IE: Software Engineer, Software Developer, etc.
  // This is beneficial so that if the users job title is not the same as the industry standard,
  // they can still be found.
  industry_titles              String[]
  // Type of job, full time, part time, contract, etc.
  type                         String?

  // ## Define Relations ##
  skills_used Skills[]

  @@schema("public")
}

// TODO: Add more tags to break these down further in the future.
model Skills {
  id             String   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  user           User     @relation(fields: [user_id], references: [id])
  user_id        String   @db.Uuid
  // Literal content of what user types
  content        String
  // What we interpreted they meant based on AI feedback
  interpretation String?
  // What industries this skill might be related to
  industry_tags  String[]

  // ## Define Relations ##
  related_jobs Jobs[]

  @@schema("public")
}

model Interests {
  id            String   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  user          User     @relation(fields: [user_id], references: [id])
  user_id       String   @db.Uuid
  content       String?
  // What industries this Interest might be related to
  industry_tags String[]

  @@schema("public")
}
